#词项词典及倒排记录表

##文档分析及编码转换

###字符序列的生成

java就是这么搞的，`InputStream` 和 `Reader`, 字节`byte`到`char`的转换

###文档单位的选择

`document unit`,  索引粒度: 如果索引粒度太小, 那么由于词项散布在多个细粒度文档中, 我们就很可能错过那些重要的段落, 也就是说此时正确率高而召回率低; 反之, 如果索引粒度太大, 我们就很可能找到很多不相关的匹配结果, 即正确率低而召回率高

##词项集合的确定

###词条化

1. 将给定的字符序列拆分成一系列子序列的过程, 其中每个子序列称为一个词条(token)

2. 词条化会过滤一些特殊的字符，比如标点符号等

3. 词或者词项与词条不同，一个词条是文档中出现的字符序列的一个实例，而词项是在信息检索系统词典中所包含的某个可能经过归一化处理的词条类。词项未必就是原始的词条, 实际上它往往要通过对原始词条进行归一化来得到

4. 词条化的主要任务就是确定哪些才是正确的词条

5. 采用相同的词条化工具，确保文本和查询中的同一个字符串序列的处理结果是一致的

6. 分词: 最大/最小匹配，CRF，HMM

   http://www.hankcs.com/nlp/segment/    N-Gram模型算法

###去掉停用词

1. 用户需求匹配是价值不大；可以将词项按照文档集频率从高到低排列，再手工选择来生成停用词库
2. 去除停用词导致对个别query无效，书中有例子的~~~
3. 不用停用词是发展趋势

###词项归一化

1. 词条归一化(token normalization)就是将看起来不完全一致的多个词条归纳成一个等价类,以便在它们之间进行匹配的过程，也就是词项归一化，只不过词项作为归一化处理过程的输出而不是输入，输入是词条`token`
2. 隐式的建立等价类
3. 维护多个非归一化词条之间的关联关系来建立等价类，这个就是同义词什么的了。同义词在什么时候处理，建索引的时候？还是查询的时候？

###词干还原和词行归并

1. 词干还原`stemming`: 通常指的是一个很粗略的去除单词两端词缀的启发式过程,并且希望大部分时间它都能达到这个正确目的,这个过程也常常包括去除派生词缀
2. 词形归并  `lemmatization`：通常指利用词汇表和词形分析来去除屈折词缀,从而返回词的原形或词典中的词的过程,返回的结果称为词元(lemma)
3. 词干还原在一般情况下会将多个派生相关词合并在一起,而词形归并通常只将同一词元的不同屈折形式进行合并
4. `Porter`词干还原算法

##基于跳跃表的倒排记录表快速合并算法

1. 跳表指针只对AND查询有用，OR查询不起作用的
2. 什么位置上放置跳表指针?这里存在一个指针个数和比较次数之间的折中问题。跳表指针越多意味着跳跃的步长越短,那么在合并过程中跳跃的可能性也更大,但同时这也意味着需要更多的指针比较次数和更多的存储空间。跳表指针越少意味着更少的指针比较次数,但同时也意味着更长的跳跃步长,也就是说意味着更少的跳跃机会
3. 每个\sqrt{P}处均匀放置跳表指针,其中P是倒排记录表的长度
4. 索引经常修改增加跳跃表的维护成本

##含位置信息的倒排记录表及短语查询

###二元词索引

短语查询

###位置信息索引

位置信息更好的解决短语查询

对每个词项, 以 `文档 ID:(位置 1,位置 2,…)` 方式存储倒排记录

###混合索引机制

二元词索引和位置索引这两种策略可以进行有效的合并